{"version":3,"file":"main.js","mappings":"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","sources":["webpack://package.json/./src/scripts/api.js","webpack://package.json/./src/components/card.js","webpack://package.json/./src/components/modal.js","webpack://package.json/./src/scripts/validation.js","webpack://package.json/./src/index.js"],"sourcesContent":["const config = {\r\n  baseUrl: 'https://nomoreparties.co/v1/wff-cohort-42',\r\n  headers: {\r\n    authorization: '0e37d1fc-ba09-49cc-aed6-0aac9e7bf040',\r\n    'Content-Type': 'application/json'\r\n  }\r\n}   // УБРАТЬ КАТЧИ\r\n\r\nconst getInitialCards = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: 'GET',\r\n    headers: config.headers\r\n  })\r\n    .then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);       // если ошибка, отклоняем промис\r\n    })\r\n};\r\n\r\nconst getProfile = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: 'GET',\r\n    headers: config.headers\r\n  })\r\n   .then(res => {\r\n     if (res.ok) {\r\n       return res.json();\r\n     }\r\n\r\n     return Promise.reject(`Ошибка: ${res.status}`);    // если ошибка, отклоняем промис\r\n   })\r\n};\r\n\r\nconst editProfile = (name, about) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({ name, about })\r\n  }) \r\n  .then(res => {\r\n     if (res.ok) {\r\n       return res.json();\r\n     }\r\n\r\n     return Promise.reject(`Ошибка: ${res.status}`);    // если ошибка, отклоняем промис\r\n   })\r\n}\r\n\r\nconst addNewCard = (name, link) => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: 'POST',\r\n    headers: config.headers,\r\n    body: JSON.stringify({ name, link })\r\n  }) \r\n  .then(res => {\r\n     if (res.ok) {\r\n       return res.json();\r\n     }\r\n\r\n     return Promise.reject(`Ошибка: ${res.status}`);    // если ошибка, отклоняем промис\r\n   })\r\n}\r\n\r\nconst deleteNewCard = (cardID) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardID}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers,\r\n  })\r\n  .then(res => {\r\n     if (res.ok) {\r\n       return res.json();\r\n     }\r\n\r\n     return Promise.reject(`Ошибка: ${res.status}`);    // если ошибка, отклоняем промис\r\n   })\r\n}\r\n\r\nconst editAvatar = (avatar) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({ avatar })\r\n  })\r\n  .then(res => {\r\n     if (res.ok) {\r\n       return res.json();\r\n     }\r\n\r\n     return Promise.reject(`Ошибка: ${res.status}`);    // если ошибка, отклоняем промис\r\n   })\r\n}\r\n\r\nconst likeCardCount = (cardID, like) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardID}`, {\r\n    method: like ? 'PUT' : 'DELETE',\r\n    headers: config.headers,\r\n  })\r\n  .then(res => {\r\n     if (res.ok) {\r\n       return res.json();\r\n     }\r\n\r\n     return Promise.reject(`Ошибка: ${res.status}`);    // если ошибка, отклоняем промис\r\n   })\r\n}\r\n\r\nexport { getInitialCards, getProfile, editProfile, addNewCard, deleteNewCard, editAvatar, likeCardCount }","import { likeCardCount, deleteNewCard } from '../scripts/api';\r\nconst likeModifier = \"card__like-button_is-active\"; \r\n\r\nconst cardTemplate = document.querySelector('#card-template').content;\r\nfunction createCard(newCard, {handleRemoveCard, handleLikeButton, handleOpenImagePopup}, userId) {\r\n  const cardElement = cardTemplate.querySelector('.places__item').cloneNode(true);\r\n  cardElement.querySelector('.card__title').textContent = newCard.name; // Данные карточки\r\n  const cardImages = cardElement.querySelector('.card__image'); // Изображение\r\n  cardImages.src = newCard.link;\r\n  cardImages.alt = newCard.name;\r\n  const deleteButton = cardElement.querySelector('.card__delete-button'); // Кнопка удаления карточки\r\n  const likesCount = cardElement.querySelector('.card__like-count'); // Счётчик лайков(!)\r\n  const likeButton = cardElement.querySelector('.card__like-button');\r\n\r\n  const isLiked = newCard.likes.some((like) => like._id === userId);\r\n  if (isLiked) likeButton.classList.add(likeModifier);\r\n  likesCount.textContent = newCard.likes.length;\r\n\r\n  if (newCard.owner._id === userId && handleRemoveCard) {\r\n    deleteButton.addEventListener('click', () => {\r\n      handleRemoveCard(newCard._id, cardElement);\r\n  });\r\n  } else {\r\n    deleteButton.remove();\r\n  }\r\n\r\n if (handleLikeButton) {\r\n  likeButton.addEventListener('click', () => {\r\n    // Передаем все необходимые параметры\r\n    handleLikeButton(newCard, likeButton, likesCount);\r\n  });\r\n}\r\n\r\n  if (handleOpenImagePopup) {\r\n    cardImages.addEventListener('click', () => \r\n    handleOpenImagePopup(cardImages.src, cardImages.alt)\r\n    );\r\n  }\r\n  \r\n  return cardElement;\r\n}\r\n\r\nfunction handleRemoveCard(newCardId, cardElement) {\r\n  deleteNewCard(newCardId)\r\n    .then(() => {\r\n      cardElement.remove();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n}\r\n\r\n\r\nfunction handleLikeButton(newCard, likeButton, likesCount) {\r\n  const cardId = newCard._id; // Идентификатор карточки!!\r\n  const isLiked = likeButton.classList.contains(likeModifier); // Текущий статус лайка\r\n\r\n  likeCardCount(cardId, !isLiked)\r\n    .then((cardData) => {\r\n      likeButton.classList.toggle(likeModifier); // Обновляем КЛАСС лайка\r\n      likesCount.textContent = cardData.likes.length; // // Обновляем СЧЁТЧИК лайков\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n}\r\n\r\nexport {createCard, handleRemoveCard, handleLikeButton};","const handleEscKeyUp = (e) => {\r\n  if (e.key === 'Escape') {\r\n    const popup = document.querySelector('.popup_is-opened'); // находим открытый попап\r\n    closeModal(popup);\r\n  }\r\n};\r\n\r\nexport const openModal = (modal) => {\r\n  modal.classList.add('popup_is-opened')  // добавляем класс открытия попапа\r\n  document.addEventListener('keydown', handleEscKeyUp)  // добавляем слушатель на кнопку Escape\r\n};\r\n\r\nexport const closeModal= (modal) => {\r\n  modal.classList.remove('popup_is-opened') // удалить класс открытия попапа\r\n  document.removeEventListener('keydown', handleEscKeyUp)  // удалить слушатель на кнопку Escape\r\n};\r\n\r\nexport const handleListener = (popupElement) => {\r\n  popupElement.classList.add('popup_is-animated');\r\n  const closeButton = popupElement.querySelectorAll('.popup__close') // ищем кнопку крестик в попапе\r\n  closeButton.forEach((button) => {\r\n  button.addEventListener('click', () => {\r\n    const popup = button.closest('.popup');\r\n    closeModal(popup);\r\n    });\r\n  });  \r\n\r\n  popupElement.addEventListener('mousedown', (event) => {\r\n    if(event.target.classList.contains('popup')) {\r\n      closeModal(popupElement); // если event.target содержит класс \"popup\", то закрываем\r\n    }\r\n  });\r\n}","// Функция очистки валидации + неактивная кнопка\r\nfunction clearValidation(formElement, validationConfig) {\r\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n  inputList.forEach((inputElement) => {\r\n    hideInputError(formElement, inputElement, validationConfig)\r\n  });\r\n\r\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n  buttonElement.disabled = true;\r\n  buttonElement.classList.add(validationConfig.inactiveButtonClass);\r\n}\r\n\r\n// Функция добавления класса ошибки\r\nconst showInputError = (formElement, inputElement, errorMessage, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.add(validationConfig.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(validationConfig.errorClass);\r\n};\r\n\r\n// Функция снятия класса ошибки\r\nconst hideInputError = (formElement, inputElement, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.remove(validationConfig.inputErrorClass);\r\n  errorElement.classList.remove(validationConfig.errorClass);\r\n  errorElement.textContent = '';\r\n};\r\n\r\n// Функция проверки валидности\r\nconst checkInputValidity = (formElement, inputElement, validationConfig) => {\r\n  if (inputElement.value.trim() === '') {    // Добавляем кастомное сообщение для пустого поля, согласно макету\r\n    inputElement.setCustomValidity('Вы пропустили это поле');\r\n  } else if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity('');\r\n  }\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(formElement, inputElement, inputElement.validationMessage, validationConfig);\r\n  } else {\r\n    hideInputError(formElement, inputElement, validationConfig);\r\n  }\r\n};\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid\r\n  })\r\n};\r\n\r\nconst toggleButtonState = (inputList, buttonElement, validationConfig) => {\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.disabled = true;\r\n    buttonElement.classList.add(validationConfig.inactiveButtonClass);\r\n  } else {\r\n    buttonElement.disabled = false;\r\n    buttonElement.classList.remove(validationConfig.inactiveButtonClass)\r\n  }\r\n};\r\n\r\n// Функция слушателя событий\r\nconst setEventListeners = (formElement, validationConfig) => {\r\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n  toggleButtonState(inputList, buttonElement, validationConfig);\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener('input', function () {\r\n      checkInputValidity(formElement, inputElement, validationConfig);\r\n      toggleButtonState(inputList, buttonElement, validationConfig);\r\n    });\r\n  });\r\n};\r\n\r\nconst enableValidation = (validationConfig) => {\r\n  const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\r\n  formList.forEach((formElement) => {\r\n    setEventListeners(formElement, validationConfig);\r\n  })\r\n}\r\n\r\nexport {clearValidation, enableValidation}","// @todo: Темплейт карточки\r\n\r\n// @todo: DOM узлы\r\n\r\n// @todo: Функция создания карточки\r\n\r\n// @todo: Функция удаления карточки\r\n\r\n// @todo: Вывести карточки на страницу\r\nimport './pages/index.css';\r\n// import { initialCards } from './scripts/cards.js';\r\nimport { createCard, handleRemoveCard, handleLikeButton, renderLikes} from './components/card.js';\r\nimport { openModal, closeModal, handleListener } from './components/modal.js';\r\nimport { clearValidation, enableValidation } from './scripts/validation.js';\r\nimport { getInitialCards, getProfile, editProfile, addNewCard, deleteNewCard, editAvatar, likeCardCount } from './scripts/api.js';\r\n\r\nconst cardList = document.querySelector('.places__list');\r\nconst popupProfile = document.querySelector('.popup_type_edit');\r\nconst popupAddNewCard = document.querySelector('.popup_type_new-card');\r\nconst popupFullImage = document.querySelector('.popup_type_image');\r\nconst popupAvatar = document.querySelector('.popup_type_avatar');\r\nconst buttonOpenPopupProfile = document.querySelector('.profile__edit-button');\r\nconst buttonOpenPopupAddNewCard = document.querySelector('.profile__add-button');\r\nconst popupImage = popupFullImage.querySelector('.popup__image');\r\nconst popupCaptionImage = popupFullImage.querySelector('.popup__caption');\r\nconst formProfile = document.forms['edit-profile'];\r\nconst imputName = formProfile.elements.name;\r\nimputName.setAttribute('id', 'input_name');\r\nconst formName = imputName;\r\nconst inputDescription = formProfile.elements.description;\r\ninputDescription.setAttribute('id', 'input_description');\r\nconst formDescription = inputDescription;\r\nconst formAvatar = document.forms['avatar'];\r\nconst profileTitle = document.querySelector('.profile__title');\r\nconst profileDescription = document.querySelector('.profile__description');\r\nconst profileAvatar = document.querySelector('.profile__image');\r\nconst formAddNewCard = document.forms['new-place'];\r\nconst cardImages = document.querySelectorAll('.card__image');\r\nconst submitButton = formAddNewCard.querySelector('.popup__button');\r\nconst validationConfig = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_disabled',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__error_visible'\r\n};\r\nconst config = {\r\n  baseUrl: 'https://nomoreparties.co/v1/wff-cohort-42',\r\n  headers: {\r\n    authorization: '0e37d1fc-ba09-49cc-aed6-0aac9e7bf040',\r\n    'Content-Type': 'application/json'\r\n  }\r\n}\r\nlet userId = null;\r\n\r\nenableValidation(validationConfig);\r\n// Попапы для форм\r\nhandleListener(popupProfile);\r\nhandleListener(popupAddNewCard);\r\nhandleListener(popupFullImage);\r\nhandleListener(popupAvatar);\r\n\r\n\r\nfunction handleOpenImagePopup(src, alt) { // попап для изображения карточки\r\n  popupImage.src = src;\r\n  popupImage.alt = alt;\r\n  popupCaptionImage.textContent = alt;\r\n  \r\n  openModal(popupFullImage);\r\n  }\r\n\r\nfunction handleProfileFormSubmit(evt) { // Функция редактирования профиля\r\n  evt.preventDefault();\r\n  const formName = formProfile.elements.name;\r\n  const formDescription = formProfile.elements.description;\r\n  const newName = formName.value;\r\n  const newAbout = formDescription.value;\r\n  const submitButton = formProfile.querySelector('.popup__button');\r\n  submitButton.textContent = 'Сохранение...';\r\n  editProfile(newName, newAbout)\r\n    .then(updatedUser => {\r\n      profileTitle.textContent = updatedUser.name;\r\n      profileDescription.textContent = updatedUser.about;\r\n      closeModal(popupProfile);  // закрываем окно после редактирования профиля\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      submitButton.textContent = 'Ошибка сохранения';\r\n    })\r\n    .finally(() => {\r\n      submitButton.textContent = 'Сохранить';\r\n    });\r\n}\r\n\r\nfunction handleAddCardSubmit(evt) { // Функция добавления карточки\r\n  evt.preventDefault();\r\n  const name = formAddNewCard.elements['place-name'].value;\r\n  const link = formAddNewCard.elements.link.value;\r\n  const submitButton = formAddNewCard.querySelector('.popup__button');\r\n  const newCardData = { name, link };\r\n  addNewCard(name, link)\r\n    .then(newCardData => {\r\n      const newCardElement = createCard(newCardData, {handleRemoveCard, handleLikeButton, handleOpenImagePopup}, userId); // Создание карточки\r\n      cardList.prepend(newCardElement); // Добавление в начало списка\r\n      formAddNewCard.reset(); // Сброс формы\r\n      closeModal(popupAddNewCard);\r\n    })\r\n    .catch(err => {\r\n      console.error('Ошибка при добавлении карточки:', err);\r\n      submitButton.textContent = 'Ошибка сохранения';\r\n    })\r\n    .finally(() => {\r\n    submitButton.textContent = 'Создать';\r\n    });\r\n}\r\n\r\nfunction handleAvatarSubmit(evt) { //функция изменения аватара\r\n  evt.preventDefault();\r\n  const formAvatarInput = formAvatar.elements['link'];\r\n  const avatarLink = formAvatarInput.value;\r\n  const submitButton = formAvatar.querySelector('.popup__button');\r\n  submitButton.textContent = 'Сохранение...';\r\n  editAvatar(avatarLink)\r\n    .then(updatedUser => {\r\n      profileAvatar.style.backgroundImage = `url(${updatedUser.avatar})`;  // По скольку базовая картинка в div'e и есть свойство backgroundImage. Обновление аватара происходит так. В противном случае обновляется только при перезагрузке страницы\r\n      formAvatar.reset();\r\n      closeModal(popupAvatar);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => {\r\n      submitButton.textContent = 'Сохранить';\r\n    });\r\n}\r\n\r\nformProfile.addEventListener('submit', handleProfileFormSubmit);   // Изменение новых данных о пользователе\r\n\r\nbuttonOpenPopupProfile.addEventListener('click', () =>{\r\n  openModal(popupProfile);\r\n  formName.value = profileTitle.textContent;   // Отображения исходного имения пользователя\r\n  formDescription.value = profileDescription.textContent;   // Отображение исходного занятия пользователя\r\n  clearValidation(formProfile, validationConfig);\r\n});\r\n\r\nformAddNewCard.addEventListener('submit', handleAddCardSubmit); // Добавление новой карточки в начало списка\r\n\r\nbuttonOpenPopupAddNewCard.addEventListener('click', () =>{\r\n  openModal(popupAddNewCard);\r\n  submitButton.textContent = 'Создать';\r\n  clearValidation(formAddNewCard, validationConfig);\r\n});\r\n\r\nformAvatar.addEventListener('submit', handleAvatarSubmit);  // Изменение аватара\r\n\r\nprofileAvatar.addEventListener('click', () =>{\r\n  openModal(popupAvatar);\r\n  clearValidation(formAvatar, validationConfig);\r\n});\r\n\r\n//initialCards.forEach(item => { // Отображение карточек на экране\r\n//  const card = createCard(item, callbacks);\r\n//  cardList.append(card);\r\n//});\r\n\r\n\r\nPromise.all([getInitialCards(), getProfile()])\r\n  .then(([cards, userData]) => {\r\n    userId = userData._id;\r\n    profileTitle.textContent = userData.name;\r\n    profileDescription.textContent = userData.about;\r\n    profileAvatar.style.backgroundImage = `url(${userData.avatar})`;\r\n\r\n    cards.forEach(newCard => {\r\n       const card = createCard(newCard, {handleRemoveCard, handleLikeButton, handleOpenImagePopup}, userId);\r\n       cardList.append(card);\r\n       });\r\n       console.log(cards)\r\n    })\r\n  .catch((err) => {\r\n      console.log(err);\r\n   });"],"names":["config","baseUrl","headers","authorization","likeModifier","cardTemplate","document","querySelector","content","createCard","newCard","_ref","userId","handleRemoveCard","handleLikeButton","handleOpenImagePopup","cardElement","cloneNode","textContent","name","cardImages","src","link","alt","deleteButton","likesCount","likeButton","likes","some","like","_id","classList","add","length","owner","addEventListener","remove","newCardId","cardID","fetch","concat","method","then","res","ok","json","Promise","reject","status","catch","err","console","log","contains","cardData","toggle","handleEscKeyUp","e","key","popup","closeModal","openModal","modal","removeEventListener","handleListener","popupElement","querySelectorAll","forEach","button","closest","event","target","clearValidation","formElement","validationConfig","Array","from","inputSelector","inputElement","hideInputError","buttonElement","submitButtonSelector","disabled","inactiveButtonClass","errorElement","id","inputErrorClass","errorClass","toggleButtonState","inputList","validity","valid","hasInvalidInput","cardList","popupProfile","popupAddNewCard","popupFullImage","popupAvatar","buttonOpenPopupProfile","buttonOpenPopupAddNewCard","popupImage","popupCaptionImage","formProfile","forms","imputName","elements","setAttribute","formName","inputDescription","description","formDescription","formAvatar","profileTitle","profileDescription","profileAvatar","formAddNewCard","submitButton","formSelector","value","trim","setCustomValidity","patternMismatch","dataset","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListeners","enableValidation","evt","preventDefault","about","newName","newAbout","body","JSON","stringify","updatedUser","finally","addNewCard","newCardData","newCardElement","prepend","reset","error","avatar","avatarLink","style","backgroundImage","all","_ref2","cards","userData","card","append"],"sourceRoot":""}